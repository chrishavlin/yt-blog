<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Line Integral Convolution for Vector Field Visualization | yt project blog</title><meta name=author content="Suoqing Ji"><meta name=description content="Line Integral Convolution for Vector Field Visualization"><meta name=generator content="Hugo 0.71.1"><link rel=canonical href=https://munkm.github.io/yt-blog/posts/line-integral/><meta property="og:title" content="Line Integral Convolution for Vector Field Visualization"><meta property="og:description" content="Line Integral Convolution for Vector Field Visualization"><meta property="og:type" content="article"><meta property="og:url" content="https://munkm.github.io/yt-blog/posts/line-integral/"><meta property="article:published_time" content="2020-06-04T14:14:29-05:00"><meta property="article:modified_time" content="2020-06-04T14:14:29-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Line Integral Convolution for Vector Field Visualization"><meta name=twitter:description content="Line Integral Convolution for Vector Field Visualization"><link rel=stylesheet href=/yt-blog/css/github-markdown.css><link rel=stylesheet href=/yt-blog/css/semantic.min.css><link rel=stylesheet href=/yt-blog/css/site.css></head><body class=default><nav class="ui secondary menu dream-menu"><div class=item><i class="large link bullseye icon dream-flip-toggle" title="Flip it!"></i></div><div class=item><i class="large link home icon" title=Home onclick="window.location.href='https:\/\/munkm.github.io\/yt-blog\/'"></i></div><div class=item><i class="large link icon theme-switch" onclick=themeSwitch()></i></div></nav><div class=flip-container><div class=flipper><section class=front><div class=dream-max-width><div class="ui centered relaxed grid dream-grid"><div class="sixteen wide mobile sixteen wide tablet twelve wide computer column markdown-body dream-single" id=dream-save-post-as-img><section class="ui top attached segment"><header><h1 class="ui large header">Line Integral Convolution for Vector Field Visualization<div class="sub header">@
Suoqing Ji
|
Thursday, Jun 4, 2020
| 2 minute read
| Update at
Thursday, Jun 4, 2020</div></h1></header><article class=main><h3 id=line-integral-convolution-for-vector-field-visualization>Line Integral Convolution for Vector Field Visualization</h3><h4 id=visualization-of-vector-fields>Visualization of Vector Fields</h4><p>When I was working on my first publication with Prof. <a href=http://www.umassd.edu/engineering/phy/people/facultyandstaff/robertfisher/>Robert
Fisher</a>,
we
explored several ways to visualize the magnetic field in our simulations of
white dwarf binary merger. Finally we drew magnetic field in the form of
streamlines, which did a satisfactory job. However, since the streamlines could
not be arbitrarily dense, the magnetic field geometry was not spatially
continuous and the information near pixel scale was lost.</p><p>Until recently, I got to know the method of line integral convolution (LIC) and
adapted the <a href=http://wiki.scipy.org/Cookbook/LineIntegralConvolution>SciPy cookbook example</a>
to yt. The basic idea of LIC is to convolute
vector field orientation with local texture over a certain kernel length, thus
all the details of vector field geometry can be preserved.</p><h4 id=draw-lic-with-one-line-of-code>Draw LIC with ONE Line of Code</h4><p>Drawing LIC for your data with yt is extremely easy &ndash; just with a single line
of code:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=color:#f92672>import</span> yt
ds <span style=color:#f92672>=</span> yt<span style=color:#f92672>.</span>load(<span style=color:#e6db74>&#34;IsolatedGalaxy/galaxy0030/galaxy0030&#34;</span>)
s <span style=color:#f92672>=</span> yt<span style=color:#f92672>.</span>SlicePlot(ds, <span style=color:#e6db74>&#39;z&#39;</span>, <span style=color:#e6db74>&#39;density&#39;</span>, center<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;c&#39;</span>, width<span style=color:#f92672>=</span>(<span style=color:#ae81ff>20</span>, <span style=color:#e6db74>&#39;kpc&#39;</span>))
s<span style=color:#f92672>.</span>annotate_line_integral_convolution(<span style=color:#e6db74>&#39;velocity_x&#39;</span>, <span style=color:#e6db74>&#39;velocity_y&#39;</span>,
lim<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0.5</span>,<span style=color:#ae81ff>0.65</span>))
s<span style=color:#f92672>.</span>save()
</code></pre></div><p>Here <code>velocity_x</code> and <code>velocity_y</code> tell yt to visualize the velocity field, which
is overlaid onto the original density slice plot. Adjusting lim will &ldquo;squeeze&rdquo;
the range of LIC magnitude and change the visibility of LIC plot. The code will
produce the following image:</p><p><img src=/img/line-integral/lic_velocity.png alt="line integral velocity"></p><p>There are <a href=http://yt-project.org/docs/dev/visualizing/callbacks.html#overplot-line-integral-convolution>more parameters</a>
you can play with to generate a perfect image. For
instance, although const_alpha is set to False as default to generate a
semitransparent LIC image over original plot, you can also set const_alpha to
True and use alpha=1 to get a pure LIC image. The following code visualizes LIC
of the magnetic field in white dwarf binary simulation:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> yt
ds <span style=color:#f92672>=</span> yt<span style=color:#f92672>.</span>load(<span style=color:#e6db74>&#34;WDMerger_hdf5_chk_1000/WDMerger_hdf5_chk_1000.hdf5&#34;</span>)
s <span style=color:#f92672>=</span> yt<span style=color:#f92672>.</span>SlicePlot(ds, <span style=color:#e6db74>&#39;theta&#39;</span>, <span style=color:#e6db74>&#39;magnetic_field_strength&#39;</span>, origin<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;native&#39;</span>)
s<span style=color:#f92672>.</span>annotate_line_integral_convolution(<span style=color:#e6db74>&#39;magnetic_field_x&#39;</span>, <span style=color:#e6db74>&#39;magnetic_field_y&#39;</span>,
lim<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0.45</span>,<span style=color:#ae81ff>0.55</span>), cmap<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;YlGnBu&#39;</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>1.</span>,const_alpha<span style=color:#f92672>=</span>True)
s<span style=color:#f92672>.</span>hide_colorbar()
s<span style=color:#f92672>.</span>save()
</code></pre></div><p>and the following image is produced:</p><p><img src=/img/line-integral/lic_Bfield.png alt="line integral BField"></p></article></section><footer class="ui attached segment dream-tags" data-html2canvas-ignore><a class="ui label" href=/yt-blog/tags/annotations title=annotations>annotations</a>
<a class="ui label" href=/yt-blog/tags/sliceplot title=SlicePlot>SlicePlot</a><div class="ui label" style=float:right;cursor:pointer onclick=savePostAsImg()><i class="save icon"></i>Save as image</div></footer></div><aside class="sixteen wide mobile sixteen wide tablet four wide computer column dream-single-aside"><div class="ui segment toc"><nav id=TableOfContents><ul><li><ul><li><a href=#line-integral-convolution-for-vector-field-visualization>Line Integral Convolution for Vector Field Visualization</a></li></ul></li></ul></nav></div><article class=dream-header><section class="ui top attached center aligned segment"><div class="ui small circular image"><img src=/img/yt_logo.svg></div><h1 class="ui medium header">the yt project's blog<div class="sub header" style=margin-top:.5rem></div></h1><div class="ui horizontal list"><a class=item href=/yt-blog/posts><i class="archive icon" title=Archives></i></a><a class=item href=/yt-blog/tags><i class="tags icon" title="All Tags"></i></a><a class=item href=/yt-blog/categories><i class="th list icon" title="All Categories"></i></a></div></section><section class="ui attached center aligned segment dream-tags"><a class="ui label" href=/yt-blog/tags/annotations title=annotations>annotations</a>
<a class="ui label" href=/yt-blog/tags/sliceplot title=sliceplot>sliceplot</a></section><section class="ui attached segment dream-categories"><div class="ui accordion"><div class=title><i class="dropdown icon"></i><a href=/yt-blog/categories/category1 class=item>category1</a></div><div class=content><div class="ui list"><div class=item><div class=content><a href=https://munkm.github.io/yt-blog/posts/line-integral/ class=item>Line Integral Convolution for Vector Field Visualization</a></div></div></div></div></div></section><section class="ui attached segment header-socials"><nav class="ui secondary menu dream-menu dream-socials"></nav></section><section class="ui bottom attached center aligned segment"><p>Â© 2020 yt project blog</p><p>Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a> with theme <a href=https://github.com/g1eny0ung/hugo-theme-dream target=_blank>Dream</a>.</p></section></article></aside></div></div></section><section class=back><div class=dream-max-width><div class="ui centered relaxed grid dream-grid dream-back"><section class="sixteen wide mobile eight wide tablet four wide computer column dream-column"><article><div class="ui top attached segment"><h3 class="ui header">Social Links</h3></div><div class="ui bottom attached segment"><nav class="ui secondary menu dream-menu dream-socials"></nav></div></article></section><section class="sixteen wide mobile eight wide tablet four wide computer column dream-column"></section></div></div></section></div></div><script src=/yt-blog/js/jquery.min.js></script><script src=/yt-blog/js/semantic.min.js></script><script src=/yt-blog/js/imagesloaded.pkgd.min.js></script><script src=/yt-blog/js/masonry.pkgd.min.js></script><script src=/yt-blog/js/nav.js></script><script src=/yt-blog/js/header.js></script><script src=/yt-blog/js/main.js></script><script src=/yt-blog/js/theme.js></script><script src=/yt-blog/js/html2canvas.min.js></script><script src=/yt-blog/js/html2canvas.min.js></script><script src=/yt-blog/js/post.js></script></body></html>